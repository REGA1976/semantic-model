{
  "$schema": "http://json-schema.org/draft-06/schema#",
  "@id": "http://ocora.io/model/transport/truck/groupage/forwarding/consignment.json",
  "title": "Consignment",
  "titleMap": {
    "en": "Consignment",
    "de": "Sendung"
  },
  "descriptionMap": {
    "en": "A single consignment which is transferred between two partners. Usually used within the context a manifest.",
    "de": "Eine Sendung, die von einem Partner zu einem anderen Partner übermittelt wird. In der Regel als Teil eines Borderos."
  },
  "type": "object",
  "properties": {
    "sender": {
      "titleMap": {
        "en": "Data Origin",
        "de": "Daten-Quelle"
      },
      "descriptionMap": {
        "en": "The sender of the current record. This usually equals to the ordering party unless the record is a copy that was generated by some other component. In this case the sender can be different from the ordering party",
        "de": "Der Versender des Datensatzes. Dies ist in der Regel der Versandpartner bzw. der beauftragende Partner. Er kann jedoch abweichen, wenn ein Dritter eine Kopie erzeugt und weiterleitet."
      },
      "examples": [
        {
          "ediFormat": "REL100",
          "location": "packageHeader.senderMailboxId",
          "networkId": "CL",
          "value": "SCHAESW"
        },
        {
          "ediFormat": "REL100",
          "location": "packageHeader.senderMailboxId",
          "networkId": "SYA",
          "value": "HELLM00"
        },
        {
          "ediFormat": "EDIFACT",
          "location": "UNB/S002/Field0004"
        }
      ],
      "$ref": "#/definitions/partnerIdentification"
    },
    "receiver": {
      "titleMap": {
        "en": "Data Recipient",
        "de": "Daten-Empfänger"
      },
      "descriptionMap": {
        "en": "The intended recipient of the the current record. This usually equals to the contracted party unless the record is intentionally sent to another system.",
        "de": "Der Empfänger des Datensatzes. Dies ist in der Regel der Empfangspartner bzw. der beauftragte Partner. Er kann jedoch abweichen, wenn der Datensatz gezielt an ein anderes System übertragen werden soll."
      },
      "examples": [
        {
          "ediFormat": "REL100",
          "location": "packageHeader.receiverMailboxId",
          "networkId": "CL",
          "value": "SCHAESW"
        },
        {
          "ediFormat": "REL100",
          "location": "packageHeader.receiverMailboxId",
          "networkId": "SYA",
          "value": "HELLM00"
        },
        {
          "ediFormat": "EDIFACT",
          "location": "UNB/S003/Field0010"
        }
      ],
      "$ref": "#/definitions/partnerIdentification"
    },
    "networkId": {
      "titleMap": {
        "en": "Network",
        "de": "Netzwerk"
      },
      "descriptionMap": {
        "en": "The network under which rules the consignment should be processed",
        "de": "Das Netzwerk, unter dessen Regeln die Sendung abgewickelt werden soll."
      },
      "type": "object",
      "properties": {
        "networkId": {
          "titleMap": {
            "en": "Name of the network",
            "de": "Name des Netzwerks"
          },
          "descriptionMap": {
            "en": "The name of the network. This is often identical to the name of the code list. Since the same code list may however be used outside the network, this field independently allows to specify the network.",
            "de": "Der Name des Netzwerk. Dieser ist in der Regel identisch mit der Code-Liste. Da die Code-Liste des Netzwerks jedoch auch für bilaterale Vereinbarungen genutzt werden kann, kann das Netzwerk als solches unabhängig angegeben werden"
          },
          "type": "string"
        },
        "codelist": {
          "titleMap": {
            "en": "Name of the code list used",
            "de": "Name der Codeliste"
          },
          "descriptionMap": {
            "en": "The name of the code list which specifies how the receiving system should interpret the codes used",
            "de": "Der Name der verwendeten Code-Liste, die angibt, wie ein empfangendes System die Werte zu interpretieren hat"
          },
          "type": "string"
        },
        "product": {
          "titleMap": {
            "en": "Name of the product",
            "de": "Name des Produkts"
          },
          "descriptionMap": {
            "en": "The product allows to distingish different processes within one network, effectively sub classing the network.",
            "de": "Das Produkt erlaubt verschiedene Prozesse innerhalb eines Netzwerks weiter zu unterscheiden und ermöglicht somit eine Unterteilung des Netzwerks in verschiedene Bereiche."
          },
          "type": "string"
        }
      }
    },
    "additionalPartners": {
      "titleMap": {
        "en": "Additional partners which are involved in the forwading of the consignment",
        "de": "Weitere Partner, die in die Weiterleitung der Sendung eingebunden sind"
      },
      "type": "array",
      "items": {
        "$ref": "#/definitions/partnerIdentification"
      }
    },
    "orderingParty": {
      "titleMap": {
        "en": "Person or company that ordered the transport of the consignment. Often identical to the shipper",
        "de": "Person oder Firma, die den Versand der Ware beauftragt hat. Oft identisch mit dem Versender"
      },
      "type": "object",
      "$ref": "#/definitions/nameAndAddress"
    },
      "shippingPartner": {
          "titleMap": {
              "en": "Shipping partner",
              "de": "Versandpartner"
          },
          "descriptionMap": {
              "en": "The partner which is sending the consignment to the receiving partner for further delivery.",
              "de": "Der Partner, der die Sendung an den Empfangspartner für die weitere Zustellung sendet."
          },
          "examples": [
              {
                  "ediFormat": "REL100",
                  "location": "A00.65-99",
                  "networkId": "CL",
                  "value": "4974"
              },
              {
                  "ediFormat": "REL100",
                  "location": "A00.65-99",
                  "networkId": "SYA",
                  "value": "3100"
              },
              {
                  "ediFormat": "EDIFACT",
                  "location": "SG5/SG9/NAD+CS/Field3035"
              }
          ],
          "$ref": "#/definitions/partnerIdentification"
      }
  },
  "patternProperties": {
    "x-.*": {},
    "\\$.*": {}
  },
  "additionalProperties": false,
  "definitions": {
    "nameAndAddress": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "additionalAddressLines": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "street": {
          "type": "string"
        },
        "countryCode": {
          "type": "string"
        },
        "zipCode": {
          "type": "string"
        },
        "city": {
          "type": "string"
        },
        "townarea": {
          "type": "string"
        }
      }
    },
    "partnerIdentification": {
      "type": "object",
      "anyOf": [
        {
          "$ref": "#/definitions/ediId"
        },
        {
          "$ref": "#/definitions/partnerId"
        },
        {
          "$ref": "#/definitions/address"
        }
      ]
    },
    "ediId": {
      "type": "object",
      "properties": {
        "ediId": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "ediId"
      ]
    },
    "partnerId": {
      "type": "object",
      "properties": {
        "partnerId": {
          "type": "string"
        }
      },
      "additionalProperties": false,
      "required": [
        "partnerId"
      ]
    },
    "address": {
      "type": "object",
      "properties": {
        "name": {
          "type": "string"
        },
        "additionalAddressLines": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "street": {
          "type": "string"
        },
        "countryCode": {
          "type": "string"
        },
        "zipCode": {
          "type": "string"
        },
        "city": {
          "type": "string"
        },
        "townarea": {
          "type": "string"
        }
      },
      "required": [
        "name"
      ]
    }
  }
}